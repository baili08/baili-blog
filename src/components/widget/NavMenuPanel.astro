---
import { Icon } from "astro-icon/components";
import { type NavBarLink } from "../../types/config";
import { url } from "../../utils/url-utils";

interface Props {
	links: NavBarLink[];
}

// 定义导航项图标映射
const linkIcons: { [key: string]: string } = {
	"/": "material-symbols:home-outline-rounded",
	"/archive/": "mdi:archive",
	"/about/": "mdi:information",
	"/friends/": "mdi:account-multiple",
	"/bangumi/": "mdi:television",
	"https://umami.baili.cfd/share/JHgyur0RQiPiNSSY/blog.my0811.cn":
		"ion:stats-chart-sharp",
};

const links = Astro.props.links;
---
<div id="nav-menu-panel" class:list={["float-panel float-panel-closed absolute transition-all fixed right-4 px-2 py-2"]}>
    {links.map((link) => {
        // 获取图标名称
        const iconName = link.external ? "fa6-solid:arrow-up-right-from-square" : 
                        linkIcons[link.url] || "material-symbols:question-mark";
        
        // 特殊处理统计链接，使用SVG代码
        const isStatsLink = link.url === "https://umami.baili.cfd/share/JHgyur0RQiPiNSSY/blog.my0811.cn";
        
        return (
            <a href={link.external ? link.url : url(link.url)} class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
                hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
            "
               target={link.external ? "_blank" : null}
            >
                <div class="transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)] flex items-center">
                    {isStatsLink ? (
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512" class="text-[1.25rem] mr-3 text-[var(--primary)]">
                            <path fill="currentColor" d="M128 496H48V304h80Zm224 0h-80V208h80Zm112 0h-80V96h80Zm-224 0h-80V16h80Z"/>
                        </svg>
                    ) : (
                        !link.external && <Icon name={iconName} class="text-[1.25rem] mr-3 text-[var(--primary)]" />
                    )}
                    {link.name}
                </div>
                {!link.external && <Icon name="material-symbols:chevron-right-rounded"
                      class="transition text-[1.25rem] text-[var(--primary)]"
                >
                </Icon>}
                {link.external && <Icon name="fa6-solid:arrow-up-right-from-square"
                      class="transition text-[0.75rem] text-[var(--primary)] -translate-x-1"
                >
                </Icon>}
            </a>
        );
    })}
</div>
