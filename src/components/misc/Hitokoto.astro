---
interface Props {
  class?: string;
}

const { class: className } = Astro.props;
---

<div class={className}>
  <div class="hitokoto-text text-white text-2xl font-bold text-center drop-shadow-lg"></div>
  <div class="hitokoto-source text-white text-lg text-center mt-2 drop-shadow-lg"></div>
</div>

<style is:global>
.hitokoto-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 20;
  width: 80%;
  max-width: 800px;
  text-align: center;
}
</style>

<script is:inline>
  // 获取一言数据
  fetch('https://v1.hitokoto.cn/?c=b')
    .then(response => response.json())
    .then(data => {
      const hitokotoText = document.querySelector('.hitokoto-text');
      const hitokotoSource = document.querySelector('.hitokoto-source');
      
      if (hitokotoText) {
        hitokotoText.textContent = data.hitokoto;
      }
      
      if (hitokotoSource && data.from) {
        hitokotoSource.textContent = `—— ${data.from}`;
      }
    })
    .catch(error => {
      console.error('获取一言失败:', error);
      // 显示默认内容
      const hitokotoText = document.querySelector('.hitokoto-text');
      if (hitokotoText) {
        hitokotoText.textContent = '一言加载失败';
      }
    });
</script>