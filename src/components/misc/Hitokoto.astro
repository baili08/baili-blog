---
interface Props {
  class?: string;
}

const { class: className } = Astro.props;
---

<div class={className}>
  <div class="hitokoto-text text-white text-xl md:text-2xl font-bold text-center drop-shadow-lg"></div>
  <div class="hitokoto-source text-white text-base md:text-lg text-center mt-2 drop-shadow-lg"></div>
</div>

<style is:global>
.hitokoto-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 20;
  width: 80%;
  max-width: 800px;
  text-align: center;
}

/* 移动端适配 */
@media (max-width: 768px) {
  .hitokoto-container {
    width: 90%;
    max-width: none;
  }
  
  .hitokoto-text {
    font-size: 1.25rem; /* 20px */
    line-height: 1.4;
  }
  
  .hitokoto-source {
    font-size: 1rem; /* 16px */
  }
}

@media (max-width: 480px) {
  .hitokoto-container {
    width: 95%;
  }
  
  .hitokoto-text {
    font-size: 1.125rem; /* 18px */
  }
  
  .hitokoto-source {
    font-size: 0.875rem; /* 14px */
  }
}
</style>

<script is:inline>
  // 获取一言数据
  fetch('https://v1.hitokoto.cn/?c=b')
    .then(response => response.json())
    .then(data => {
      const hitokotoText = document.querySelector('.hitokoto-text');
      const hitokotoSource = document.querySelector('.hitokoto-source');
      
      if (hitokotoText) {
        hitokotoText.textContent = data.hitokoto;
      }
      
      if (hitokotoSource && data.from) {
        hitokotoSource.textContent = `—— ${data.from}`;
      }
    })
    .catch(error => {
      console.error('获取一言失败:', error);
      // 显示默认内容
      const hitokotoText = document.querySelector('.hitokoto-text');
      if (hitokotoText) {
        hitokotoText.textContent = '一言加载失败';
      }
    });
</script>