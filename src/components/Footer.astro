---
import { profileConfig } from "../config";
import { url } from "../utils/url-utils";
const currentYear = new Date().getFullYear();
---

<footer class="py-8 text-center text-sm bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border-t border-gray-200 dark:border-gray-700 rounded-t-2xl shadow-inner">
  <div class="container mx-auto px-4">
    <div class="mb-4 flex flex-col md:flex-row justify-center items-center gap-4 flex-wrap">
      <div class="flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
        </svg>
        <span id="runtime" class="font-medium text-gray-700 dark:text-gray-300">⏱️加载中...</span>
      </div>
      
      <div class="flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-500" viewBox="0 0 20 20" fill="currentColor">
          <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
          <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
        </svg>
        <span>本页访问<span id="busuanzi_page_pv" class="font-bold text-primary">加载中</span>次</span>
      </div>
      
      <div class="flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-purple-500" viewBox="0 0 20 20" fill="currentColor">
          <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z" />
        </svg>
        <span>总访<span id="busuanzi_site_pv" class="font-bold text-primary">加载中</span>次</span>
      </div>
      
      <div class="flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
        </svg>
        <span>访客<span id="busuanzi_site_uv" class="font-bold text-primary">加载中</span>人</span>
      </div>
    </div>

    <div class="mb-2">
      <a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener" class="text-primary hover:underline">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
        </svg>
        晋ICP备2025063045号
      </a>
    </div>

    <div class="flex flex-col md:flex-row justify-center items-center gap-2 text-gray-600 dark:text-gray-400">
      <div class="flex items-center">
        &copy;{currentYear} {profileConfig.name}
      </div>
      <div class="hidden md:block">|</div>
      <div class="flex items-center gap-2">
        <a href={url('rss.xml')} target="_blank" class="text-primary hover:underline flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M3 5a2 2 0 012-2h10a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm11 1H6v8l4-2 4 2V6z" clip-rule="evenodd" />
          </svg>
          RSS
        </a>
      </div>
      <div class="hidden md:block">|</div>
      <div class="flex items-center gap-2">
        <a href={url('sitemap-index.xml')} target="_blank" class="text-primary hover:underline flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
          </svg>
          Sitemap
        </a>
      </div>
      <div class="hidden md:block">|</div>
      <div class="flex items-center gap-2">
        Powered by 
        <a href="https://astro.build" target="_blank" class="text-primary hover:underline flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
          Astro
        </a>
      </div>
    </div>
  </div>

  <script is:inline src="https://www.busuanzi.cc/static/3.6.9/busuanzi.min.js"></script>
  <script is:inline src="/runtime.js"></script>
  
  <!-- 移动端特殊处理，确保页脚内容显示 -->
  <script is:inline>
    // 移动端额外的初始化处理
    function mobileFooterInit() {
      // 确保运行时间显示元素存在
      const runtimeElement = document.getElementById('runtime');
      if (runtimeElement && runtimeElement.textContent === '⏱️加载中...') {
        // 如果运行时间仍未更新，则手动触发一次更新
        if (typeof initRuntime === 'function') {
          setTimeout(initRuntime, 100);
        }
      }
    }
    
    // 在不同时间点尝试初始化
    document.addEventListener('DOMContentLoaded', mobileFooterInit);
    window.addEventListener('load', mobileFooterInit);
    window.addEventListener('pageshow', mobileFooterInit);
    
    // 针对移动端浏览器的特殊处理
    setTimeout(mobileFooterInit, 500);
    setTimeout(mobileFooterInit, 1000);
    setTimeout(mobileFooterInit, 3000);
  </script>
</footer>